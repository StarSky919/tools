<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <link rel="icon" href="../assets/logo.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../assets/logo.ico" type="image/x-icon">
    <link rel="stylesheet" href="../assets/css/style.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <title>Cytus II计算器</title>
</head>

<body>
    <div class="nav">
        <input type="checkbox" id="checkbox">
        <label for="checkbox" class="menu">
            <i class="fa fa-bars"></i>
        </label>
        <div class="items"></div>
        <span class="home">
            <a href="../" class="fa fa-home"></a>
        </span>
        <span class="title">Cytus II Calculator</span>
    </div>
    <div class="row" onclick="closeMenu()">
        <div class="main">
            <h2>小P数量计算</h2>
            <p id="result">开始计算以查看结果</p>
            <input type="number" class="text" id="stp" placeholder="输入歌曲TP" />
            <input type="number" class="text" id="perfect" placeholder="输入Perfect数" />
            <input type="number" class="text" id="good" placeholder="输入Good数" />
            <input type="number" class="text" id="bad" placeholder="输入Bad数" />
            <input type="number" class="text" id="miss" placeholder="输入Miss数" />
            <p class="button">
                <a id="calc" onclick="calc()">计算</a>
                <a id="reset" onclick="reset()">重置</a>
            </p>
            <p class="copyright">
                <i class="fa fa-copyright"></i> 2021 StarSky919
            </p>
        </div>
    </div>
    <div class="footer">
        <a href="#" class="gr active">小P计算</a>
        <a href="atp/" class="atp">ATP计算</a>
    </div>
    <script type="text/javascript" src="../assets/js/main.js"></script>
    <script type="text/javascript" src="../assets/js/cy2calc.js"></script>
    <script type="text/javascript">
        var stp, perfect, good, bad, miss;

        function calc() {
            stp = Number(getElm1('stp').value);
            perfect = Number(getElm1('perfect').value);
            good = Number(getElm1('good').value);
            bad = Number(getElm1('bad').value);
            miss = Number(getElm1('miss').value);

            if (stp > 100 || stp <= 0 || perfect + good + bad + miss == 0) {
                al1();
                return;
            } else if (stp < 0 || perfect < 0 || good < 0 || bad < 0 || miss < 0) {
                al1();
                return;
            } else if (stp == 100) {
                if (good + bad + miss != 0) {
                    al1();
                    return;
                } else {
                    al2();
                    return;
                }
            } else {
                var res = grCalc(stp, perfect, good, bad, miss);
                if (res < 0 || res > perfect) {
                    al1();
                    return;
                } else if (res == 0) {
                    al2();
                    return;
                } else {
                    res1(res);
                }
            }
        }

        function grCalc(tp, p, g, b, m) {
            gr = 0;
            gr = Math.round(p - ((p + g + b + m) * tp - 30 * g - 70 * p) / 30);
            return gr;
        }

        function reset() {
            result.innerHTML = str;
            getElm1('stp').value = '';
            getElm1('perfect').value = '';
            getElm1('good').value = '';
            getElm1('bad').value = '';
            getElm1('miss').value = '';
        }
    </script>
</body>

</html>